#########################################
#---------------------------------------#
# Star Package Manager - Common Library #
#---------------------------------------#
#########################################
# Created by AwlsomeAlex [GNU GPLv3]
# Protostar Branch


#############
# Variables #
#############
RD='\033[1;31m'
GN='\033[1;32m'
YW='\033[1;33m'
BL='\033[1;34m'
NC='\033[0m'
CONFIG_FILE="$REPO_DIR/starlinux.config"
SPM_VER='read_config SPM_VER'


###################
# Child Functions #
###################

# read_config: Reads a variable from the User Modifiable Configuration File
function read_config() {
	variable_name=$1
	variable_value=
	if [ ! "$variable_name" = "" ]; then
		variable_value="`grep -i ^${variable_name}= $CONFIG_FILE | cut -f2- -d'=' | xargs`"
	else
		message ERROR "A Variable Name was not defined!"
	fi
	if [ "$variable_value" = "" ]; then
		message ERROR "Variable $variable_name Returned NOTHING!"
	fi
}

# message: Displays a custom color-coded message for User Output
function message() {
	option=$1
	message=$2
	if [ "$option" = "" ]; then
		echo -e "${RC}Usage: message [option] [message]"
		echo -e "Option: WARN, ERROR, ...., DONE"
		echo -e "Message: Displays Text for Certain Messages${NC}"
	elif [ "$option" = "WARN" ]; then
		echo ""
		echo "==============="
		echo -e "| ${RD} !!! WARNING !!! ${NC} |"
		echo "==============="
		echo $message
	elif [ "option" = "ERROR" ]; then
		echo ""
		echo "==============="
		echo -e "| ${RD} !!! ERROR !!! ${NC} |"
		echo "==============="
		echo $message
		echo ""
		exit 72
	elif [ "$option" = "...." ]; then
		echo -e "${BL}(****) ${NC} $message"
	elif [ "$option" = "DONE" ]; then
		echo -e "${BL}(DONE) ${NC} $message"
	else
		echo -e "${RC}Usage: message [option] [message]"
		echo -e "Option: WARN, ERROR, ...., DONE"
		echo -e "Message: Displays Text for Certain Messages${NC}"
	fi
}


#####################
# Primary Functions #
#####################

# run_lib: Function call which transfers execution power from Script to Library
function run_lib() {
	echo -e "${GN}StarLinux Package Manager $SPM_VER has been loaded!"
}
